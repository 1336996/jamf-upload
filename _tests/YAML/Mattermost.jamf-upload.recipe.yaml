Description: Creates a category and uploads a package.
Identifier: com.github.grahampugh.jamf-upload-test.Mattermost
MinimumVersion: 2.0.0
ParentRecipe: com.github.jlehikoinen.pkg.Mattermost

Input:
  POLICY_NAME: Mattermost
  JSS_INVENTORY_NAME: "%NAME%.app"
  CATEGORY: Applications
  SCRIPT_CATEGORY: Postinstall Scripts
  PARAMETER4_TITLE: Random Input Field
  PARAMETER4_VALUE: Some Random Parameter Value like 36
  TESTKEY: Hello World!
  TESTKEY2: This is just a test script.
  TESTKEY3: "%version%"
  POSTINSTALL_SCRIPT_NAME: test.sh
  POSTINSTALL_SCRIPT_PATH: "%RECIPE_DIR%/test.sh"
  SELF_SERVICE_DESCRIPTION: This is a test policy upload using JamfPolicyUploader

Process:
  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfCategoryUploader
    Arguments:
      category_name: "%CATEGORY%"
      category_priority: 5

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfCategoryUploader
    Arguments:
      category_name: "%SCRIPT_CATEGORY%"
      category_priority: 5

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfScriptUploader
    Arguments:
      script_category: "%SCRIPT_CATEGORY%"
      script_path: "%POSTINSTALL_SCRIPT_PATH%"
      script_parameter4: "%PARAMETER4_TITLE%"

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfExtensionAttributeUploader
    Arguments:
      ea_script_path: "%RECIPE_DIR%/Microsoft Office License Type.sh"
      ea_name: Test Extension Attribute

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfPackageUploader

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfComputerGroupUploader
    Arguments:
      group_template: "%RECIPE_DIR%/SmartGroupTemplate-test-users.xml"
      group_name: "%POLICY_NAME% test users"

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfComputerGroupUploader
    Arguments:
      group_template: "%RECIPE_DIR%/SmartGroupTemplate-test-version-installed.xml"
      group_name: "%POLICY_NAME% test version installed"

  - Processor: com.github.grahampugh.jamf-upload-test.processors/JamfPolicyUploader
    Arguments:
      policy_template: "%RECIPE_DIR%/PolicyTemplate-untested-package-postinstall.xml"
      policy_name: "%POLICY_NAME% v%version%"
